!function(u){function e(e){for(var t,n,r=e[0],a=e[1],o=e[2],c=0,s=[];c<r.length;c++)n=r[c],Object.prototype.hasOwnProperty.call(d,n)&&d[n]&&s.push(d[n][0]),d[n]=0;for(t in a)Object.prototype.hasOwnProperty.call(a,t)&&(u[t]=a[t]);for(f&&f(e);s.length;)s.shift()();return l.push.apply(l,o||[]),i()}function i(){for(var e,t=0;t<l.length;t++){for(var n=l[t],r=!0,a=1;a<n.length;a++){var o=n[a];0!==d[o]&&(r=!1)}r&&(l.splice(t--,1),e=c(c.s=n[0]))}return e}var n={},d={0:0},l=[];function c(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return u[e].call(t.exports,t,t.exports,c),t.l=!0,t.exports}c.m=u,c.c=n,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)c.d(n,r,function(e){return t[e]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var t=window.webpackJsonp=window.webpackJsonp||[],r=t.push.bind(t);t.push=e,t=t.slice();for(var a=0;a<t.length;a++)e(t[a]);var f=r;l.push([11,1]),i()}([,,function(e,t,n){var r=n(3);"string"==typeof r&&(r=[[e.i,r,""]]);var a={insert:"head",singleton:!1};n(4)(r,a);r.locals&&(e.exports=r.locals)},function(e,t,n){},,,,function(e,t,n){var r={"./eu":8,"./ru":9};function a(e){var t=o(e);return n(t)}function o(e){if(n.o(r,e))return r[e];var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return Object.keys(r)},a.resolve=o,(e.exports=a).id=7},,,,function(e,t,n){"use strict";n.r(t);n(2);var r=n(1),i=n.n(r),a=(n(5),n(0)),b=n.n(a);n(10);function d(r,a){return new Promise(function(e,t){var n=new XMLHttpRequest;n.open(r,a),n.send(),n.onload=function(){200!=n.status?(t(error),console.log("Error ".concat(n.status,": ").concat(n.statusText))):e(this.response)},n.onprogress=function(e){e.lengthComputable},n.onerror=function(){console.log("Request failed"),t(new Error("Network Error"))}})}i()(document).ready(function(){if(i()(".calendar-section__calendar").length){var t=function(n){n=n;var r=document.getElementById("calendar"),e=document.querySelectorAll(".calendar-trigger"),t=document.querySelector(".calendar-days"),a=Array.apply(null,Array(7)).map(function(e,t){return b()(t,"e").locale("ru").startOf("week").isoWeekday(t+1).format("ddd")}),y=Array.apply(null,Array(12)).map(function(e,t){return b()().locale("ru").month(t).format("MMMM")});a.forEach(function(e){t.insertAdjacentHTML("beforeend",'<div class="calendar-day">'.concat(e,"</div>"))});var M=document.querySelector(".js-month-select"),Y=document.querySelector(".js-year-select");function o(){var e=b()().format("YYYY-MM-DD");s(r.dataset.reference=e)}function c(e,t){e="prev"===t?b()(e).subtract(1,"month").format("MMMM-DD-YYYY"):b()(e).add(1,"month").format("MMMM-DD-YYYY"),s(r.dataset.reference=e)}function s(e){for(var t=document.querySelector(".calendar-dates");t.firstChild;)t.removeChild(t.firstChild);var n=b()().format("MM-D-YYYY"),r=b()(e).format("YYYY"),a=b()(e).format("MM"),o=(b()(e).format("DD"),b()(e).daysInMonth()),c=b()(e).subtract(1,"month").daysInMonth(),s=function(e){var t=b()(e).startOf("month").format("dddd");if("Monday"===t)return 0;if("Tuesday"===t)return 1;if("Wednesday"===t)return 2;if("Thursday"===t)return 3;if("Friday"===t)return 4;if("Saturday"===t)return 5;if("Sunday"===t)return 6}(e);M.options.length||y.forEach(function(e,t){M.insertAdjacentHTML("beforeend",'<option value="'.concat(t+1,'">').concat(e,"</option>"))});for(var u=[r],i=1;i<=2;i++)u.push(parseInt(r)+i),u.push(parseInt(r)-i);u.sort(function(e,t){return e-t}),Y.options.length||u.forEach(function(e){Y.insertAdjacentHTML("beforeend","<option>".concat(e,"</option>"))}),M.value=b()(a).format("M"),Y.value=r;for(var d=0;d<s;d++)t.innerHTML+=m("prev",c-s+d+1,a,r);for(var l=0;l<o;l++)t.innerHTML+=m("now",l+1,a,r);for(var f=function(e,t){if(Number.isInteger(t/e))return 0;return 7-t%e}(7,s+o),p=0;p<f;p++)t.innerHTML+=m("next",p+1,a,r);if(b()().format("MM")===a&&b()().format("YYYY")===r){var v=document.querySelector('.calendar-date[data-date="'.concat(n,'"]'));v&&v.classList.add("today-date")}function h(e){switch(e){case 1:return"января";case 2:return"февраля";case 3:return"марта";case 4:return"апреля";case 5:return"мая";case 6:return"июня";case 7:return"июля";case 8:return"августа";case 9:return"сентября";case 10:return"октября";case 11:return"ноября";case 12:return"декабря"}}function m(e,t,n,r){var a=n+"-"+t+"-"+r,o=parseInt(n);h(o);if("prev"===e){a=b()(a).subtract(1,"month").format("YYYY-MM-DD");var c=o-1;0===c&&(c=12),h(c)}if("next"===e){a=b()(a).add(1,"month").format("YYYY-MM-DD");var s=o+1;13===s&&(s=1),h(s)}return'<button\n\t\tclass="calendar-date '.concat(e,'-date"\n\t\tdata-day="').concat(t,'"\n\t\tdata-date="').concat(a,'">\n\t\t    <span class="calendar-number"><span>').concat(t,'</span></span>\n\t\t    <span class="calendar-events"></span>\n\t\t</button>')}}function u(e){document.querySelectorAll(".calendar-dates > *");e.forEach(function(t){t.dates.all_dates.forEach(function(e){!function(e,t,n,r){e=b()(e).format("MM-DD-YYYY");var a=document.querySelector('.calendar-date[data-date="'.concat(e,'"]'));if(a){a.classList.add("has-events"),a.childNodes[3].innerHTML+='\n                <span class="calendar-event">\n                    <span class="calendar-event__date">'.concat(b()(e).format("DD.MM.YYYY"),'</span>\n                    <span class="calendar-event__title">').concat(t,'</span>\n                    <span class="calendar-event__text">').concat(n,'</span>\n                    <a href="').concat(r,'" class="calendar-event__btn">Подробнее</a>\n                </span>'),i()(".calendar-event__title").each(function(){i()(this).html(function(e,t){return(e=e.trim()).length<=t?e:(e=e.slice(0,t)).trim()+"..."}(i()(this).text(),25))});a.childNodes[3].childNodes.length}}(e,t.pagetitle,t.introtext,t.url)})}),document.querySelectorAll(".more-events").forEach(function(e){e.addEventListener("click",function(){this.closest(".calendar-events").cloneNode(!0),this.closest(".calendar-date").getAttribute("data-date")})})}document.querySelectorAll('[name="poster-type"]').forEach(function(e){e.addEventListener("change",function(){d("GET","http://point.icbcode.ru/events/all?filter=".concat(this.value,"&object=").concat(object_id)).then(function(e){n=JSON.parse(e),o(),u(n)})})}),M.addEventListener("change",function(){var e=Y.value,t=b()(e+"-"+this.value+"-01").format("YYYY-MM-DD");s(r.dataset.reference=t),u(n)}),Y.addEventListener("change",function(){var e=M.value,t=b()(this.value+"-"+e+"-01").format("YYYY-MM-DD");s(r.dataset.reference=t),u(n)}),o(),e.forEach(function(t){t.addEventListener("click",function(){var e=r.dataset.reference;t.classList.contains("calendar-prev")?c(e,"prev"):c(e,"next")})}),u(n),e.forEach(function(e){e.addEventListener("click",function(){u(n)})}),i()("body").delegate(".has-events","mouseover",function(){i()(this).find(".calendar-events").addClass("open")}),i()("body").delegate(".has-events","mouseout",function(){i()(this).find(".calendar-events").removeClass("open")})};d("GET","posters.json").then(function(e){t(JSON.parse(e))})}}),i()(document).ready(function(){i()(".calendar-slider").slick({slidesToShow:2})})}]);